/**
 * Slide Pan Pan
 * Version: 0.7.2.1
 * Author: @Webnist
 * Site: http://webni.st
 * Licensed under the MIT license
 */
!function(t){function e(e,i){var s=parseInt(e.outerWidth(),10),a=parseInt(e.css("margin-left"),10),h=parseInt(e.position().left,10)+a,l=t("i#current-bar");i?(l.stop().animate({width:s,left:h},n.settingspeed,"linear"),e.siblings("li").removeClass("next prev current"),e.removeClass("next prev"),e.addClass("current"),e.next("li").addClass("next"),e.prev("li").addClass("prev")):l.css({width:s,left:h})}function i(t){var e=n.element,i=parseInt(e.outerWidth(!0),10),s=parseInt(i/2,10),a=t.parent("ul"),h=parseInt(a.outerWidth(!0),10),l=parseInt(t.outerWidth(!0),10),r=parseInt(l/2,10),o=parseInt(t.position().left,10),p=r+o,d=l+o,c=p-s,f=h-d,u=a.children("li:last"),v=parseInt(u.outerWidth(!0),10),g=parseInt(u.position().left,10),m=v+g,x=i-m;s>=f?a.stop().animate({left:x},n.settingspeed,"linear"):p>=s?a.stop().animate({left:-c},n.settingspeed,"linear"):a.stop().animate({left:0},n.settingspeed,"linear")}function s(){t(window).resize(function(){var s=n.element,a=s.children("nav").find("li.current"),h=s.children("div"),l=parseInt(h.outerWidth(!0),10),r=h.children("div");e(a,"resize"),i(a),r.each(function(){left=parseInt(t(this).css("left"),10),0>left&&t(this).stop().animate({left:-l},0,"linear")})}).resize()}var n={},a="ontouchstart"in window;t.fn.slidePanPan=function(h){if(t(this)[0]){var l={speed:200},r=t.extend(l,h);n.element=this,n.setting=r;var o=t(this),p=o.children("nav"),d=p.children("ul"),c=d.children("li"),f=d.children("li:first"),u=o.children("div"),v=u.children("div"),g=parseInt(0,10),m=parseInt(v.length,10),x=(parseInt(0,10),parseInt(0,10));c.each(function(e){var i=t(this).outerWidth(!0);g=parseInt(i,10)+g,0===e&&t(this).addClass("current")}),d.css({width:g}),d.append('<i id="current-bar"></i>'),e(f),v.each(function(){t(this).innerHeight()>x&&(x=t(this).innerHeight()),t(this).css({"z-index":m}),m-=1}),v.css({height:x}),u.css({height:x,overflow:"hidden"}),d.on({"touchstart mousedown":function(e){e.preventDefault(),this.bodyWidth=t("body").width(),this.fw=parseInt(o.width(),10),this.navUlWidth=parseInt(d.outerWidth(!0),10),this.max=this.navUlWidth-this.fw,this.pageX=a?e.originalEvent.touches[0].clientX:e.pageX,this.left=t(this).position().left,this.touched=!0,this.move=!1},"touchmove mousemove":function(e){this.touched&&(e.preventDefault(),this.move=!0,this.left=this.left-(this.pageX-(a?e.originalEvent.touches[0].clientX:e.pageX)),this.bodyWidth<this.navUlWidth&&t(this).css({left:this.left}),this.accel=5*((a?e.originalEvent.touches[0].clientX:e.pageX)-this.pageX),this.pageX=a?e.originalEvent.touches[0].clientX:e.pageX)},"touchend mouseup resize":function(s){if(this.touched){if(this.bodyWidth<this.navUlWidth&&(this.left+=this.accel,t(this).animate({left:this.left},r.speed,"linear")),!this.move){if(tapTarget=t(s.target),tapTarget.is("li")){index=parseInt(tapTarget.index(),10);var n=parseInt(v.eq(index).prev("div").css("left"),10),a=parseInt(v.eq(index).next("div").css("left"),10);c.removeClass("current"),tapTarget.addClass("current"),e(tapTarget,s),i(tapTarget),isNaN(n)&&isNaN(a)?v.eq(index).prevAll("div").stop().animate({left:-this.fw},r.speed,"linear"):isNaN(n)?v.stop().animate({left:0},r.speed,"linear"):-this.fw==n?(v.eq(index).stop().animate({left:0},r.speed,"linear"),v.eq(index).nextAll("div").stop().animate({left:0},r.speed,"linear")):v.eq(index).prevAll("div").stop().animate({left:-this.fw},r.speed,"linear")}t("html, body").stop().animate({scrollTop:this.home},0,"linear")}this.accel=0,this.bodyWidth<this.navUlWidth&&(this.left>0&&t(this).stop().animate({left:0},r.speed),this.left<-this.max&&t(this).stop().animate({left:-this.max},r.speed)),this.touched=!1}}}),v.on({"touchstart mousedown":function(e){this.home=parseInt(o.position().top),this.index=parseInt(t(this).index(),10),this.pageX=a?e.originalEvent.touches[0].clientX:e.pageX,this.pageY=a?e.originalEvent.touches[0].clientY:e.pageY,this.left=t(this).position().left,this.top=t(this).position().top,this.touched=!0},"touchmove mousemove":function(e){var i=parseInt(t(this).index(),10)+1;m=parseInt(v.length,10),this.touched&&(this.left=this.left-(this.pageX-(a?e.originalEvent.touches[0].clientX:e.pageX)),this.top=this.top-(this.pageY-(a?e.originalEvent.touches[0].clientY:e.pageY)),Math.abs(this.left)>Math.abs(this.top)&&(e.preventDefault(),this.left<0&&m!==i&&t(this).css({left:this.left})),this.pageX=a?e.originalEvent.touches[0].clientX:e.pageX,this.pageY=a?e.originalEvent.touches[0].clientY:e.pageY)},"touchend mouseup resize":function(s){if(this.touched){if(fw=o.width(),s.preventDefault(),Math.abs(this.left)<Math.abs(this.top)){var n=o.children("nav").find("li.current");setTimeout(function(){i(n)},r.speed)}this.left<-50?t(this).next("div")[0]&&(t(this).stop().animate({left:-fw},r.speed,"linear"),e(c.eq(this.index).next("li"),s),i(c.eq(this.index).next("li")),t("html, body").stop().animate({scrollTop:this.home},0,"linear")):this.left>50?t(this).prev("div")[0]&&(t(this).prev("div").stop().animate({left:0},r.speed),e(c.eq(this.index).prev("li"),s),i(c.eq(this.index).prev("li")),t("html, body").stop().animate({scrollTop:this.home},0,"linear")):t(this).stop().animate({left:0},r.speed),this.touched=!1}}}),s()}}}(jQuery);